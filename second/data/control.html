<!--2.控制面板-->
<div id="control" class="page-content-wrapper">
    <div class="page-content">
        <!--第一行-->
        <div class="row">
            <div class="col-md-4 col-sm-6 col-xs-12">
                <div class="dashboard-stat">
                    <div class="visual">
                        <div id="health"></div>
                    </div>
                    <ul class="legend">
                        <li><i class="dangerous"></i>危险</li>
                        <li><i class="sub-health"></i>亚健康</li>
                        <li><i class="health"></i>健康</li>
                    </ul>
                </div>
            </div>
            <div class="col-md-4 col-sm-6 col-xs-12">
                <div class="dashboard-stat">
                    <div class="visual">
                        <div id="risk"></div>
                    </div>
                    <div class="details-control" id="control-risk">
                    </div>
                </div>
            </div>
            <div class="col-md-4 col-sm-6 col-xs-12">
                <div class="dashboard-stat">
                    <div class="visual">
                        <div id="safe"></div>
                    </div>
                    <div class="details-control" id="control-security">
                    </div>
                </div>
            </div>
        </div>
        <div class="clearfix"></div>
        <!--第二行-->
        <div class="row">
            <!--事件分类饼图-->
            <div class="col-md-7 col-sm-7">
                <div class="portlet bordered">
                    <div class="portlet-title">
                        <div class="caption">
                            <span class="bold">事件分类</span>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div id="event" class="canvas"></div>
                    </div>
                </div>
            </div>
            <!--表格-->
            <div class="col-md-5 col-sm-5">
                <div class="portlet bordered">
                    <div class="portlet-title">
                        <ul class="table-bars">
                            <li class="active"><a href="#virus"><img src="imgs/icon__1.png"/>病毒感染源</a></li>
                            <li><a href="#net"><img src="imgs/icon__2.png"/>网络入侵源</a></li>
                            <li><a href="#application"><img src="imgs/icon__3.png"/>应用事件源</a></li>
                        </ul>
                    </div>
                    <table class="active portlet-table " id="virus">
                        <thead>
                        <tr>
                            <td>IP地址</td>
                            <td>出现次数</td>
                            <td colspan="3">操作</td>
                        </tr>
                        </thead>
                        <tbody>
                        </tbody>
                        <tfoot>
                        <tr>
                            <td colspan="5">
                                <ul>
                                </ul>
                            </td>
                        </tr>
                        </tfoot>
                    </table>
                    <table class="portlet-table " id="net">
                        <thead>
                        <tr>
                            <td>IP地址</td>
                            <td>出现次数</td>
                            <td colspan="3">操作</td>
                        </tr>
                        </thead>
                        <tbody>
                        </tbody>
                        <tfoot>
                        <tr>
                            <td colspan="5">
                                <ul>
                                </ul>
                            </td>
                        </tr>
                        </tfoot>
                    </table>
                    <table class="portlet-table " id="application">
                        <thead>
                        <tr>
                            <td>IP地址</td>
                            <td>出现次数</td>
                            <td colspan="3">操作</td>
                        </tr>
                        </thead>
                        <tbody>
                        </tbody>
                        <tfoot>
                        <tr>
                            <td colspan="5">
                                <ul>
                                </ul>
                            </td>
                        </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
        <!--第三行-->
        <div class="row">
            <!--事件告警表格-->
            <div class="col-md-7 col-sm-7">
                <div class="portlet bordered">
                    <div class="portlet-title">
                        <div class="caption">
                            <span class="bold uppercase">事件告警：</span>
                            <ul class="table-bars">
                                <li class="active"><a href="#virus1"><img src="imgs/icon__1.png"/>病毒感染</a></li>
                                <li><a href="#net1"><img src="imgs/icon__2.png"/>网络入侵</a></li>
                                <li><a href="#application1"><img src="imgs/icon__3.png"/>应用安全</a></li>
                            </ul>
                        </div>
                    </div>
                    <table id="virus1" class="portlet-table active ">
                        <thead>
                        <tr>
                            <td>ID</td>
                            <td>时间</td>
                            <td>恶意软件类型</td>
                            <td>恶意软件名称</td>
                        </tr>
                        </thead>
                        <tbody>
                        </tbody>
                        <tfoot>
                        <tr>
                            <td colspan="4">
                                <ul>
                                </ul>
                            </td>
                        </tr>
                        </tfoot>
                    </table>
                    <table id="net1" class="portlet-table ">
                        <thead>
                        <tr>
                            <td>ID</td>
                            <td>时间</td>
                            <td>恶意软件类型</td>
                            <td>恶意软件名称</td>
                        </tr>
                        </thead>
                        <tbody>
                        </tbody>
                        <tfoot>
                        <tr>
                            <td colspan="4">
                                <ul>
                                </ul>
                            </td>
                        </tr>
                        </tfoot>
                    </table>
                    <table id="application1" class="portlet-table ">
                        <thead>
                        <tr>
                            <td>ID</td>
                            <td>时间</td>
                            <td>恶意软件类型</td>
                            <td>恶意软件名称</td>
                        </tr>
                        </thead>
                        <tbody>
                        </tbody>
                        <tfoot>
                        <tr>
                            <td colspan="4">
                                <ul>
                                </ul>
                            </td>
                        </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
            <!--自身状态-->
            <div class="col-md-5 col-sm-5">
                <div class="portlet bordered">
                    <div class="portlet-title">
                        <div class="caption">
                            <span class="caption-subject bold uppercase">自身状态</span>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div class="row state" id="self-state">
                            <div class="col-xs-2 separate">
                                <span data-img="0" class="col-xs-6"></span>
                                <span data-img="1" class="col-xs-6"></span>
                            </div>
                            <div class="col-xs-10">
                                <div class="row">
                                    <div class="col-xs-3 col-xs-offset-9 inner-box">
                                        <div class="row">
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="1" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="inner-box col-xs-3">
                                        <div class="row">
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="1" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                        </div>
                                    </div>
                                    <div class="inner-box col-xs-3">
                                        <div class="row">
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="1" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                        </div>
                                    </div>
                                    <div class="inner-box col-xs-3">
                                        <div class="row">
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="1" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                        </div>
                                    </div>
                                    <div class="inner-box col-xs-3">
                                        <div class="row">
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="1" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                            <span data-img="0" class="col-xs-3"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    health();//自身健康仪表盘
    event();//事件分类饼图
    addData('virus');//第二行表格
    addData('virus1');//第三行表格

    //表格按钮切换
    $(".table-bars li").click(function (e) {
        e.preventDefault();
        var href = $(this).children("a")[0].hash;
        $(href).addClass("active").siblings("table").removeClass("active");
        $(this).addClass("active").siblings("li").removeClass("active");
        addData(href.slice(1));
    });

    //自身状态
    var span = $("#self-state span");
    setInterval(function () {
        for (var i = 0; i < span.length; i++) {
            span[i].dataset.img = Math.random() > 0.5 ? 1 : 0;
            var img = span[i].dataset.img;
            if (img === "0") {
                span[i].innerHTML = "<img src='imgs/down.png'>";
            }
            else {
                span[i].innerHTML = "<img src='imgs/up.png'>";
            }
        }
    }, 1000);

    //highcharts图表
    Highcharts.setOptions({
        global: {
            useUTC: false
        }
    });
    //威胁风险
    $('#risk').highcharts({
        chart: {
            type: 'areaspline',
            animation: Highcharts.svg, // don't animate in old IE
            marginRight: 0,
            marginLeft: 0,
            backgroundColor: "#F5F5F5",
            marginBottom: 0,
            events: {
                load: function () {
                    // set up the updating of the chart each second
                    var series = this.series[0];
                    setInterval(function () {
                        var x = (new Date()).getTime(), // current time
                                y = random(0, 100);
                        series.addPoint([x, y], true, true);
                        $("#control-risk").html(y + "分");
                    }, 1000);
                }
            }
        },
        title: {
            text: '威胁风险',
            style: {
                color: "#333",
                fontSize: 20,
                fontWeight: 'bold',
                fontFamily: "Microsoft YaHei"
            },
            floating: true,
            align: "right",
            y: 30
        },
        subtitle: {
            text: '当前风险状况',
            align: "right",
            style: {
                color: "#333",
                fontSize: 15,
                fontFamily: "Microsoft YaHei"
            },
            y: 56
        },
        legend: {
            enabled: false
        },
        xAxis: {
            type: 'datetime',
            tickPixelInterval: 150,
            labels: {
                enabled: false
            },
            tickWidth: 0,
            lineWidth: 0
        },
        yAxis: {
            title: null,
            gridLineWidth: 0,
            labels: {
                enabled: false
            }
        },
        tooltip: {
            enabled: false
        },
        credits: {
            enabled: false
        },
        plotOptions: {
            areaspline: {
                fillOpacity: 0.5,
                fillColor: "#dde4f0",
                lineWidth: 0
            }
        },
        series: [{
            name: 'Random data',
            data: (function () {
                // generate an array of random data
                var data = [],
                        time = (new Date()).getTime(),
                        i;
                for (i = -19; i <= 0; i += 1) {
                    data.push({
                        x: time + i * 1000,
                        y: random(0, 100)
                    });
                }
                $("#control-risk").html(data[data.length - 1].y + "分");
                return data;
            }())
        }]
    });
    //安全事件
    $('#safe').highcharts({
        chart: {
            type: 'areaspline',
            animation: Highcharts.svg, // don't animate in old IE
            marginRight: 0,
            marginLeft: 0,
            backgroundColor: "#F5F5F5",
            marginBottom: 0,
            events: {
                load: function () {
                    // set up the updating of the chart each second
                    var series = this.series[0];
                    setInterval(function () {
                        var x = (new Date()).getTime(), // current time
                                y = random(0, 100);
                        series.addPoint([x, y], true, true);
                        $("#control-security").html(y + "次");
                    }, 1000);
                }
            }
        },
        title: {
            text: '安全事件',
            style: {
                color: "#333",
                fontSize: 20,
                fontWeight: 'bold',
                fontFamily: "Microsoft YaHei"
            },
            floating: true,
            align: "right",
            y: 30
        },
        subtitle: {
            text: '当前事件统计',
            align: "right",
            style: {
                color: "#333",
                fontSize: 15,
                fontFamily: "Microsoft YaHei"
            },
            y: 56
        },
        legend: {
            enabled: false
        },
        xAxis: {
            type: 'datetime',
            tickPixelInterval: 150,
            labels: {
                enabled: false
            },
            tickWidth: 0,
            lineWidth: 0
        },
        yAxis: {
            title: null,
            gridLineWidth: 0,
            labels: {
                enabled: false
            }
        },
        tooltip: {
            enabled: false
        },
        credits: {
            enabled: false
        },
        plotOptions: {
            areaspline: {
                fillOpacity: 0.5,
                fillColor: "#D8EAC5",
                lineWidth: 0
            }
        },
        series: [{
            name: 'Random data',
            marker: {
                fillColor: '#A3D56F',
                lineWidth: 0
            },
            data: (function () {
                // generate an array of random data
                var data = [],
                        time = (new Date()).getTime(),
                        i;
                for (i = -19; i <= 0; i += 1) {
                    data.push({
                        x: time + i * 1000,
                        y: random(0, 100)
                    });
                }
                $("#control-security").html(data[data.length - 1].y + "次");
                return data;
            }()),
            dataLabels: {
                show: true
            }
        }]
    });
</script>